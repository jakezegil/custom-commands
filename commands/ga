#!/bin/bash

# gita add: Add files to git staging area with beautiful, clear feedback
# If no files are specified, defaults to 'git add .'
# Usage: gita add [file ...] | --help
# this is basically git add alias

if ! command -v git &> /dev/null; then
    echo "git is not installed." >&2
    exit 1
fi

if [[ "$1" == "-h" || "$1" == "--help" ]]; then
    if [[ -f "$(dirname "$(dirname "$0")")/help/ga.help" ]]; then
        echo -e "$(cat "$(dirname "$(dirname "$0")")/help/ga.help")"
    else
        echo "Help file not found"
    fi
    exit 0
fi

if [ $# -eq 0 ]; then
    files="."
    msg="(all changes)"
else
    files="$@"
    msg="$*"
fi

git add $files
if [ $? -eq 0 ]; then
    echo -e "\033[1;32m✔ Successfully staged:\033[0m $msg"
else
    echo -e "\033[1;31m✗ Failed to add files.\033[0m"
fi